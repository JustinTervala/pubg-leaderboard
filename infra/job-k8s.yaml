# apiVersion: batchv1
apiVersion: v1
kind: Pod
metadata:
  name: pubg
spec:
  #schedule: "0 0 * * *"
  # jobTemplate:
  #   spec:
  # template:
  #   spec:
  containers:
    - name: hello
      image: "pubg-scraper:latest"
      imagePullPolicy: Never
      command:
        - "python"
        - "pubg/job.py"
      args:
        - "--quick"
      env:
        - name: REDIS_HOST
          value: pubg-redis-cluster
        - name: REDIS_PORT
          value: "6379"
      volumeMounts:
        - name: secret-volume
          mountPath: /etc/secrets/
          readOnly: true
      resources:
        requests:
          cpu: 500m
          memory: 64Mi
        limits:
          cpu: 500m
          memory: 64Mi
  restartPolicy: OnFailure
  volumes:
    - name: secret-volume
      secret:
        secretName: pubg-scraper-secret